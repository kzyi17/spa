(function(c,d){var b={setObj:function(h,f){var g=this;var i=h;d.each(f,function(e,j){i=g.setParam(e,j,i)});return i},setParam:function(k,h,l,m){if("undefined"==typeof k||"undefined"==typeof h||"undefined"==typeof l){return l}var f,j=new RegExp("(^|&|\\?|#)"+k+"=([^&]*?)(&|#|$)"),g=l.match(/#.*/)?l.match(/#.*/)[0]:"";return l=l.replace(/#.*/,""),m===!0?(j.test(g)?g=g.replace(j,function(p,q,e,i){return q+k+"="+encodeURIComponent(h)+i}):(f=-1===g.indexOf("#")?"#":"&",g=g+f+k+"="+encodeURIComponent(h)),g=g.replace(j,function(p,q,e,i){return q+k+"="+encodeURIComponent(h)+i}),g+l):(j.test(l)?l=l.replace(j,function(p,q,e,i){return q+k+"="+encodeURIComponent(h)+i}):(f=-1===l.indexOf("?")?"?":"&",l=l+f+k+"="+encodeURIComponent(h)),l+g)},getParam:function(i,f){var h=new RegExp("(^|&|\\?|#)"+i+"=([^&]*?)(&|#|$)");var f=f||location.href;var g=f.match(/#.*/)?f.match(/#.*/)[0]:"";return f=f.replace(/#.*/,""),h.test(g)?decodeURIComponent(g.match(h)[2]):h.test(f)?decodeURIComponent(f.match(h)[2]):""},open:function(g,f,h){var i="http://"+c.location.host+"/bashi_app/bulid/"+g;a=f?f:i;h?c.history.replaceState(history.state,"",a):location.href=a},href:function(e){c.location.href=e},loading:function(h){var e=d("body");ovl=d("#loading");mask=d("#mask");var f=d('<div class="loading" id="loading"><div class="sp sp-bars"></div><span id="speak">'+h+"</span></div>"),g=d('<div id="mask"></div>');if(mask.length===0){e.append(g)}if(ovl.length===0){e.append(f)}d("#mask").css("display","block");d("#loading").css("display","block")},share:function(i,h){var e=d("body");ovl=d("#share");mask=d("#mask");h=h===undefined?"images/share_tips.png":h;var f=d('<div class="sh" id="share"><img src="'+h+'"/><div class="word"><p>'+i+"</p></div></div>"),g=d('<div id="mask"></div>');if(mask.length===0){e.append(g)}if(ovl.length===0){e.append(f)}d("#mask").css("display","block");d("#share").css("display","block")},loadingHide:function(){var e=d("#loading");mask=d("#mask");if(mask.length!==0){d("#mask").css("display","none")}if(e.length!==0){d("#speak").html("");d("#loading").css("display","none")}},localLoading:function(f){var e=f,h=d(".s-loading");var g=d('<div class="s-loading"></div>');if(h.length===0){e.html(g)}else{d(".s-loading").css("display","block")}},localLoadingHide:function(e){var f=e.find(".s-loading");if(f.length!==0){d(".s-loading").css("display","none")}},popWindow:function(h){var e=d("body");mask=d("#mask");var f=d('<div class="popWindow" id="popWindow"><div class="close"><span class="toggle-line"></span><span class="toggle-line"></span></div><img src="'+h+'"/></div>'),g=d('<div id="mask"></div>');if(mask.length===0){e.append(g);d("#mask").css("display","block")}else{d("#mask").css("display","block")}if(d("#popWindow").length===0){e.append(f);d("#popWindow").css("display","block")}else{d("#popWindow").css("display","block")}d("#mask").on("click",function(){d(this).hide();d("#popWindow").css("display","none")});d("#popWindow .close").on("click",function(){d("#mask").hide();d("#popWindow").css("display","none")})},};c.Mib=b})(window,Zepto);(function(c,d,g){var b={alert:'<div id="mibus_toast"><a></a></div>',};function f(){var h={};this.timer=null;this.get=function(i){return h[i]};this.set=function(j,i){h[j]=i};this.init()}f.prototype={init:function(){this.createDom();this.bindEvent()},createDom:function(){var h=d("body");ovl=d("#mibus_toast");if(ovl.length===0){h.append(b.alert)}this.set("ovl",d("#mibus_toast"))},bindEvent:function(){var h=this;ovl=h.get("ovl");this.timer=setTimeout(function(){h.hide()},3000)},alert:function(h){var h=typeof h==="string"?h:h.toString();ovl=this.get("ovl");ovl.find("a").html(h);this.set("type","alert");this.show();clearTimeout(this.timer);this.bindEvent()},show:function(){this.get("ovl").fadeIn()},hide:function(){var h=this.get("ovl");h.hide();h.find("a").html("")},};var e=new f();c.alert=function(h){e.alert.call(e,h)}})(window,Zepto);(function(g,b,f){var i=g.requestAnimationFrame||g.webkitRequestAnimationFrame||g.mozRequestAnimationFrame||g.oRequestAnimationFrame||g.msRequestAnimationFrame||function(j){g.setTimeout(j,1000/60)};var d=(function(){var n={};var o=b.createElement("div").style;var l=(function(){var s=["t","webkitT","MozT","msT","OT"],q,r=0,p=s.length;for(;r<p;r++){q=s[r]+"ransform";if(q in o){return s[r].substr(0,s[r].length-1)}}return false})();function m(p){if(l===false){return false}if(l===""){return p}return l+p.charAt(0).toUpperCase()+p.substr(1)}n.getTime=Date.now||function j(){return new Date().getTime()};n.extend=function(r,q){for(var p in q){r[p]=q[p]}};n.addEvent=function(s,r,q,p){s.addEventListener(r,q,!!p)};n.removeEvent=function(s,r,q,p){s.removeEventListener(r,q,!!p)};n.prefixPointerEvent=function(p){return g.MSPointerEvent?"MSPointer"+p.charAt(9).toUpperCase()+p.substr(10):p};n.momentum=function(v,r,s,p,w,x){var q=v-r,t=f.abs(q)/s,y,u;x=x===undefined?0.0006:x;y=v+(t*t)/(2*x)*(q<0?-1:1);u=t/x;if(y<p){y=w?p-(w/2.5*(t/8)):p;q=f.abs(y-v);u=q/t}else{if(y>0){y=w?w/2.5*(t/8):0;q=f.abs(v)+y;u=q/t}}return{destination:f.round(y),duration:u}};var k=m("transform");n.extend(n,{hasTransform:k!==false,hasPerspective:m("perspective") in o,hasTouch:"ontouchstart" in g,hasPointer:g.PointerEvent||g.MSPointerEvent,hasTransition:m("transition") in o});n.isBadAndroid=/Android /.test(g.navigator.appVersion)&&!(/Chrome\/\d/.test(g.navigator.appVersion));n.extend(n.style={},{transform:k,transitionTimingFunction:m("transitionTimingFunction"),transitionDuration:m("transitionDuration"),transitionDelay:m("transitionDelay"),transformOrigin:m("transformOrigin")});n.hasClass=function(q,r){var p=new RegExp("(^|\\s)"+r+"(\\s|$)");return p.test(q.className)};n.addClass=function(q,r){if(n.hasClass(q,r)){return}var p=q.className.split(" ");p.push(r);q.className=p.join(" ")};n.removeClass=function(q,r){if(!n.hasClass(q,r)){return}var p=new RegExp("(^|\\s)"+r+"(\\s|$)","g");q.className=q.className.replace(p," ")};n.offset=function(p){var r=-p.offsetLeft,q=-p.offsetTop;while(p=p.offsetParent){r-=p.offsetLeft;q-=p.offsetTop}return{left:r,top:q}};n.preventDefaultException=function(r,q){for(var p in q){if(q[p].test(r[p])){return true}}return false};n.extend(n.eventType={},{touchstart:1,touchmove:1,touchend:1,mousedown:2,mousemove:2,mouseup:2,pointerdown:3,pointermove:3,pointerup:3,MSPointerDown:3,MSPointerMove:3,MSPointerUp:3});n.extend(n.ease={},{quadratic:{style:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",fn:function(p){return p*(2-p)}},circular:{style:"cubic-bezier(0.1, 0.57, 0.1, 1)",fn:function(p){return f.sqrt(1-(--p*p))}},back:{style:"cubic-bezier(0.175, 0.885, 0.32, 1.275)",fn:function(q){var p=4;return(q=q-1)*q*((p+1)*q+p)+1}},bounce:{style:"",fn:function(p){if((p/=1)<(1/2.75)){return 7.5625*p*p}else{if(p<(2/2.75)){return 7.5625*(p-=(1.5/2.75))*p+0.75}else{if(p<(2.5/2.75)){return 7.5625*(p-=(2.25/2.75))*p+0.9375}else{return 7.5625*(p-=(2.625/2.75))*p+0.984375}}}}},elastic:{style:"",fn:function(p){var q=0.22,r=0.4;if(p===0){return 0}if(p==1){return 1}return(r*f.pow(2,-10*p)*f.sin((p-q/4)*(2*f.PI)/q)+1)}}});n.tap=function(r,p){var q=b.createEvent("Event");q.initEvent(p,true,true);q.pageX=r.pageX;q.pageY=r.pageY;r.target.dispatchEvent(q)};n.click=function(r){var q=r.target,p;if(!(/(SELECT|INPUT|TEXTAREA)/i).test(q.tagName)){p=b.createEvent("MouseEvents");p.initMouseEvent("click",true,true,r.view,1,q.screenX,q.screenY,q.clientX,q.clientY,r.ctrlKey,r.altKey,r.shiftKey,r.metaKey,0,null);p._constructed=true;q.dispatchEvent(p)}};return n})();function h(l,j){this.wrapper=typeof l=="string"?b.querySelector(l):l;this.scroller=this.wrapper.children[0];this.scrollerStyle=this.scroller.style;this.options={resizeScrollbars:true,mouseWheelSpeed:20,snapThreshold:0.334,startX:0,startY:0,scrollY:true,directionLockThreshold:5,momentum:true,bounce:true,bounceTime:600,bounceEasing:"",preventDefault:true,preventDefaultException:{tagName:/^(INPUT|TEXTAREA|BUTTON|SELECT)$/},HWCompositing:true,useTransition:true,useTransform:true};for(var k in j){this.options[k]=j[k]}this.translateZ=this.options.HWCompositing&&d.hasPerspective?" translateZ(0)":"";this.options.useTransition=d.hasTransition&&this.options.useTransition;this.options.useTransform=d.hasTransform&&this.options.useTransform;this.options.eventPassthrough=this.options.eventPassthrough===true?"vertical":this.options.eventPassthrough;this.options.preventDefault=!this.options.eventPassthrough&&this.options.preventDefault;this.options.scrollY=this.options.eventPassthrough=="vertical"?false:this.options.scrollY;this.options.scrollX=this.options.eventPassthrough=="horizontal"?false:this.options.scrollX;this.options.freeScroll=this.options.freeScroll&&!this.options.eventPassthrough;this.options.directionLockThreshold=this.options.eventPassthrough?0:this.options.directionLockThreshold;this.options.bounceEasing=typeof this.options.bounceEasing=="string"?d.ease[this.options.bounceEasing]||d.ease.circular:this.options.bounceEasing;this.options.resizePolling=this.options.resizePolling===undefined?60:this.options.resizePolling;if(this.options.tap===true){this.options.tap="tap"}if(this.options.shrinkScrollbars=="scale"){this.options.useTransition=false}this.options.invertWheelDirection=this.options.invertWheelDirection?-1:1;this.x=0;this.y=0;this.directionX=0;this.directionY=0;this._events={};this._init();this.refresh();this.scrollTo(this.options.startX,this.options.startY);this.enable()}h.prototype={version:"5.1.3",_init:function(){this._initEvents();if(this.options.scrollbars||this.options.indicators){this._initIndicators()}if(this.options.mouseWheel){this._initWheel()}if(this.options.snap){this._initSnap()}if(this.options.keyBindings){this._initKeys()}},destroy:function(){this._initEvents(true);this._execEvent("destroy")},_transitionEnd:function(j){if(j.target!=this.scroller||!this.isInTransition){return}this._transitionTime();if(!this.resetPosition(this.options.bounceTime)){this.isInTransition=false;this._execEvent("scrollEnd")}},_start:function(k){if(d.eventType[k.type]!=1){if(k.button!==0){return}}if(!this.enabled||(this.initiated&&d.eventType[k.type]!==this.initiated)){return}if(this.options.preventDefault&&!d.isBadAndroid&&!d.preventDefaultException(k.target,this.options.preventDefaultException)){k.preventDefault()}var j=k.touches?k.touches[0]:k,l;this.initiated=d.eventType[k.type];this.moved=false;this.distX=0;this.distY=0;this.directionX=0;this.directionY=0;this.directionLocked=0;this._transitionTime();this.startTime=d.getTime();if(this.options.useTransition&&this.isInTransition){this.isInTransition=false;l=this.getComputedPosition();this._translate(f.round(l.x),f.round(l.y));this._execEvent("scrollEnd")}else{if(!this.options.useTransition&&this.isAnimating){this.isAnimating=false;this._execEvent("scrollEnd")}}this.startX=this.x;this.startY=this.y;this.absStartX=this.x;this.absStartY=this.y;this.pointX=j.pageX;this.pointY=j.pageY;this._execEvent("beforeScrollStart")},_move:function(o){if(!this.enabled||d.eventType[o.type]!==this.initiated){return}if(this.options.preventDefault){o.preventDefault()}var q=o.touches?o.touches[0]:o,l=q.pageX-this.pointX,k=q.pageY-this.pointY,p=d.getTime(),j,r,n,m;this.pointX=q.pageX;this.pointY=q.pageY;this.distX+=l;this.distY+=k;n=f.abs(this.distX);m=f.abs(this.distY);if(p-this.endTime>300&&(n<10&&m<10)){return}if(!this.directionLocked&&!this.options.freeScroll){if(n>m+this.options.directionLockThreshold){this.directionLocked="h"}else{if(m>=n+this.options.directionLockThreshold){this.directionLocked="v"}else{this.directionLocked="n"}}}if(this.directionLocked=="h"){if(this.options.eventPassthrough=="vertical"){o.preventDefault()}else{if(this.options.eventPassthrough=="horizontal"){this.initiated=false;return}}k=0}else{if(this.directionLocked=="v"){if(this.options.eventPassthrough=="horizontal"){o.preventDefault()}else{if(this.options.eventPassthrough=="vertical"){this.initiated=false;return}}l=0}}l=this.hasHorizontalScroll?l:0;k=this.hasVerticalScroll?k:0;j=this.x+l;r=this.y+k;if(j>0||j<this.maxScrollX){j=this.options.bounce?this.x+l/3:j>0?0:this.maxScrollX}if(r>0||r<this.maxScrollY){r=this.options.bounce?this.y+k/3:r>0?0:this.maxScrollY}this.directionX=l>0?-1:l<0?1:0;this.directionY=k>0?-1:k<0?1:0;if(!this.moved){this._execEvent("scrollStart")}this.moved=true;this._translate(j,r);if(p-this.startTime>300){this.startTime=p;this.startX=this.x;this.startY=this.y}},_end:function(p){if(!this.enabled||d.eventType[p.type]!==this.initiated){return}if(this.options.preventDefault&&!d.preventDefaultException(p.target,this.options.preventDefaultException)){p.preventDefault()}var r=p.changedTouches?p.changedTouches[0]:p,l,k,o=d.getTime()-this.startTime,j=f.round(this.x),u=f.round(this.y),t=f.abs(j-this.startX),s=f.abs(u-this.startY),m=0,q="";this.isInTransition=0;this.initiated=0;this.endTime=d.getTime();if(this.resetPosition(this.options.bounceTime)){return}this.scrollTo(j,u);if(!this.moved){if(this.options.tap){d.tap(p,this.options.tap)}if(this.options.click){d.click(p)}this._execEvent("scrollCancel");return}if(this._events.flick&&o<200&&t<100&&s<100){this._execEvent("flick");return}if(this.options.momentum&&o<300){l=this.hasHorizontalScroll?d.momentum(this.x,this.startX,o,this.maxScrollX,this.options.bounce?this.wrapperWidth:0,this.options.deceleration):{destination:j,duration:0};k=this.hasVerticalScroll?d.momentum(this.y,this.startY,o,this.maxScrollY,this.options.bounce?this.wrapperHeight:0,this.options.deceleration):{destination:u,duration:0};j=l.destination;u=k.destination;m=f.max(l.duration,k.duration);this.isInTransition=1}if(this.options.snap){var n=this._nearestSnap(j,u);this.currentPage=n;m=this.options.snapSpeed||f.max(f.max(f.min(f.abs(j-n.x),1000),f.min(f.abs(u-n.y),1000)),300);j=n.x;u=n.y;this.directionX=0;this.directionY=0;q=this.options.bounceEasing}if(j!=this.x||u!=this.y){if(j>0||j<this.maxScrollX||u>0||u<this.maxScrollY){q=d.ease.quadratic}this.scrollTo(j,u,m,q);return}this._execEvent("scrollEnd")},_resize:function(){var j=this;clearTimeout(this.resizeTimeout);this.resizeTimeout=setTimeout(function(){j.refresh()},this.options.resizePolling)},resetPosition:function(k){var j=this.x,l=this.y;k=k||0;if(!this.hasHorizontalScroll||this.x>0){j=0}else{if(this.x<this.maxScrollX){j=this.maxScrollX}}if(!this.hasVerticalScroll||this.y>0){l=0}else{if(this.y<this.maxScrollY){l=this.maxScrollY}}if(j==this.x&&l==this.y){return false}this.scrollTo(j,l,k,this.options.bounceEasing);return true},disable:function(){this.enabled=false},enable:function(){this.enabled=true},refresh:function(){var j=this.wrapper.offsetHeight;this.wrapperWidth=this.wrapper.clientWidth;this.wrapperHeight=this.wrapper.clientHeight;this.scrollerWidth=this.scroller.offsetWidth;this.scrollerHeight=this.scroller.offsetHeight;this.maxScrollX=this.wrapperWidth-this.scrollerWidth;this.maxScrollY=this.wrapperHeight-this.scrollerHeight;this.hasHorizontalScroll=this.options.scrollX&&this.maxScrollX<0;this.hasVerticalScroll=this.options.scrollY&&this.maxScrollY<0;if(!this.hasHorizontalScroll){this.maxScrollX=0;this.scrollerWidth=this.wrapperWidth}if(!this.hasVerticalScroll){this.maxScrollY=0;this.scrollerHeight=this.wrapperHeight}this.endTime=0;this.directionX=0;this.directionY=0;this.wrapperOffset=d.offset(this.wrapper);this._execEvent("refresh");this.resetPosition()},on:function(k,j){if(!this._events[k]){this._events[k]=[]}this._events[k].push(j)},off:function(l,k){if(!this._events[l]){return}var j=this._events[l].indexOf(k);if(j>-1){this._events[l].splice(j,1)}},_execEvent:function(m){if(!this._events[m]){return}var k=0,j=this._events[m].length;if(!j){return}for(;k<j;k++){this._events[m][k].apply(this,[].slice.call(arguments,1))}},scrollBy:function(j,m,k,l){j=this.x+j;m=this.y+m;k=k||0;this.scrollTo(j,m,k,l)},scrollTo:function(j,m,k,l){l=l||d.ease.circular;this.isInTransition=this.options.useTransition&&k>0;if(!k||(this.options.useTransition&&l.style)){this._transitionTimingFunction(l.style);this._transitionTime(k);this._translate(j,m)}else{this._animate(j,m,k,l.fn)}},scrollToElement:function(k,l,j,o,n){k=k.nodeType?k:this.scroller.querySelector(k);if(!k){return}var m=d.offset(k);m.left-=this.wrapperOffset.left;m.top-=this.wrapperOffset.top;if(j===true){j=f.round(k.offsetWidth/2-this.wrapper.offsetWidth/2)}if(o===true){o=f.round(k.offsetHeight/2-this.wrapper.offsetHeight/2)}m.left-=j||0;m.top-=o||0;m.left=m.left>0?0:m.left<this.maxScrollX?this.maxScrollX:m.left;m.top=m.top>0?0:m.top<this.maxScrollY?this.maxScrollY:m.top;l=l===undefined||l===null||l==="auto"?f.max(f.abs(this.x-m.left),f.abs(this.y-m.top)):l;this.scrollTo(m.left,m.top,l,n)},_transitionTime:function(k){k=k||0;this.scrollerStyle[d.style.transitionDuration]=k+"ms";if(!k&&d.isBadAndroid){this.scrollerStyle[d.style.transitionDuration]="0.001s"}if(this.indicators){for(var j=this.indicators.length;j--;){this.indicators[j].transitionTime(k)}}},_transitionTimingFunction:function(k){this.scrollerStyle[d.style.transitionTimingFunction]=k;if(this.indicators){for(var j=this.indicators.length;j--;){this.indicators[j].transitionTimingFunction(k)}}},_translate:function(j,l){if(this.options.useTransform){this.scrollerStyle[d.style.transform]="translate("+j+"px,"+l+"px)"+this.translateZ}else{j=f.round(j);l=f.round(l);this.scrollerStyle.left=j+"px";this.scrollerStyle.top=l+"px"}this.x=j;this.y=l;if(this.indicators){for(var k=this.indicators.length;k--;){this.indicators[k].updatePosition()}}},_initEvents:function(j){var k=j?d.removeEvent:d.addEvent,l=this.options.bindToWrapper?this.wrapper:g;k(g,"orientationchange",this);k(g,"resize",this);if(this.options.click){k(this.wrapper,"click",this,true)}if(!this.options.disableMouse){k(this.wrapper,"mousedown",this);k(l,"mousemove",this);k(l,"mousecancel",this);k(l,"mouseup",this)}if(d.hasPointer&&!this.options.disablePointer){k(this.wrapper,d.prefixPointerEvent("pointerdown"),this);k(l,d.prefixPointerEvent("pointermove"),this);k(l,d.prefixPointerEvent("pointercancel"),this);k(l,d.prefixPointerEvent("pointerup"),this)}if(d.hasTouch&&!this.options.disableTouch){k(this.wrapper,"touchstart",this);k(l,"touchmove",this);k(l,"touchcancel",this);k(l,"touchend",this)}k(this.scroller,"transitionend",this);k(this.scroller,"webkitTransitionEnd",this);k(this.scroller,"oTransitionEnd",this);k(this.scroller,"MSTransitionEnd",this)},getComputedPosition:function(){var k=g.getComputedStyle(this.scroller,null),j,l;if(this.options.useTransform){k=k[d.style.transform].split(")")[0].split(", ");j=+(k[12]||k[4]);l=+(k[13]||k[5])}else{j=+k.left.replace(/[^-\d.]/g,"");l=+k.top.replace(/[^-\d.]/g,"")}return{x:j,y:l}},_initIndicators:function(){var l=this.options.interactiveScrollbars,n=typeof this.options.scrollbars!="string",p=[],k;var o=this;this.indicators=[];if(this.options.scrollbars){if(this.options.scrollY){k={el:e("v",l,this.options.scrollbars),interactive:l,defaultScrollbars:true,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenX:false};this.wrapper.appendChild(k.el);p.push(k)}if(this.options.scrollX){k={el:e("h",l,this.options.scrollbars),interactive:l,defaultScrollbars:true,customStyle:n,resize:this.options.resizeScrollbars,shrink:this.options.shrinkScrollbars,fade:this.options.fadeScrollbars,listenY:false};this.wrapper.appendChild(k.el);p.push(k)}}if(this.options.indicators){p=p.concat(this.options.indicators)}for(var m=p.length;m--;){this.indicators.push(new c(this,p[m]))}function j(r){for(var q=o.indicators.length;q--;){r.call(o.indicators[q])}}if(this.options.fadeScrollbars){this.on("scrollEnd",function(){j(function(){this.fade()})});this.on("scrollCancel",function(){j(function(){this.fade()})});this.on("scrollStart",function(){j(function(){this.fade(1)})});this.on("beforeScrollStart",function(){j(function(){this.fade(1,true)})})}this.on("refresh",function(){j(function(){this.refresh()})});this.on("destroy",function(){j(function(){this.destroy()});delete this.indicators})},_initWheel:function(){d.addEvent(this.wrapper,"wheel",this);d.addEvent(this.wrapper,"mousewheel",this);d.addEvent(this.wrapper,"DOMMouseScroll",this);this.on("destroy",function(){d.removeEvent(this.wrapper,"wheel",this);d.removeEvent(this.wrapper,"mousewheel",this);d.removeEvent(this.wrapper,"DOMMouseScroll",this)})},_wheel:function(n){if(!this.enabled){return}n.preventDefault();n.stopPropagation();var l,k,o,m,j=this;if(this.wheelTimeout===undefined){j._execEvent("scrollStart")}clearTimeout(this.wheelTimeout);this.wheelTimeout=setTimeout(function(){j._execEvent("scrollEnd");j.wheelTimeout=undefined},400);if("deltaX" in n){if(n.deltaMode===1){l=-n.deltaX*this.options.mouseWheelSpeed;k=-n.deltaY*this.options.mouseWheelSpeed}else{l=-n.deltaX;k=-n.deltaY}}else{if("wheelDeltaX" in n){l=n.wheelDeltaX/120*this.options.mouseWheelSpeed;k=n.wheelDeltaY/120*this.options.mouseWheelSpeed}else{if("wheelDelta" in n){l=k=n.wheelDelta/120*this.options.mouseWheelSpeed}else{if("detail" in n){l=k=-n.detail/3*this.options.mouseWheelSpeed}else{return}}}}l*=this.options.invertWheelDirection;k*=this.options.invertWheelDirection;if(!this.hasVerticalScroll){l=k;k=0}if(this.options.snap){o=this.currentPage.pageX;m=this.currentPage.pageY;if(l>0){o--}else{if(l<0){o++}}if(k>0){m--}else{if(k<0){m++}}this.goToPage(o,m);return}o=this.x+f.round(this.hasHorizontalScroll?l:0);m=this.y+f.round(this.hasVerticalScroll?k:0);if(o>0){o=0}else{if(o<this.maxScrollX){o=this.maxScrollX}}if(m>0){m=0}else{if(m<this.maxScrollY){m=this.maxScrollY}}this.scrollTo(o,m,0)},_initSnap:function(){this.currentPage={};if(typeof this.options.snap=="string"){this.options.snap=this.scroller.querySelectorAll(this.options.snap)}this.on("refresh",function(){var s=0,q,o=0,k,r,p,u=0,t,w=this.options.snapStepX||this.wrapperWidth,v=this.options.snapStepY||this.wrapperHeight,j;this.pages=[];if(!this.wrapperWidth||!this.wrapperHeight||!this.scrollerWidth||!this.scrollerHeight){return}if(this.options.snap===true){r=f.round(w/2);p=f.round(v/2);while(u>-this.scrollerWidth){this.pages[s]=[];q=0;t=0;while(t>-this.scrollerHeight){this.pages[s][q]={x:f.max(u,this.maxScrollX),y:f.max(t,this.maxScrollY),width:w,height:v,cx:u-r,cy:t-p};t-=v;q++}u-=w;s++}}else{j=this.options.snap;q=j.length;k=-1;for(;s<q;s++){if(s===0||j[s].offsetLeft<=j[s-1].offsetLeft){o=0;k++}if(!this.pages[o]){this.pages[o]=[]}u=f.max(-j[s].offsetLeft,this.maxScrollX);t=f.max(-j[s].offsetTop,this.maxScrollY);r=u-f.round(j[s].offsetWidth/2);p=t-f.round(j[s].offsetHeight/2);this.pages[o][k]={x:u,y:t,width:j[s].offsetWidth,height:j[s].offsetHeight,cx:r,cy:p};if(u>this.maxScrollX){o++}}}this.goToPage(this.currentPage.pageX||0,this.currentPage.pageY||0,0);if(this.options.snapThreshold%1===0){this.snapThresholdX=this.options.snapThreshold;this.snapThresholdY=this.options.snapThreshold}else{this.snapThresholdX=f.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].width*this.options.snapThreshold);this.snapThresholdY=f.round(this.pages[this.currentPage.pageX][this.currentPage.pageY].height*this.options.snapThreshold)}});this.on("flick",function(){var j=this.options.snapSpeed||f.max(f.max(f.min(f.abs(this.x-this.startX),1000),f.min(f.abs(this.y-this.startY),1000)),300);this.goToPage(this.currentPage.pageX+this.directionX,this.currentPage.pageY+this.directionY,j)})},_nearestSnap:function(k,p){if(!this.pages.length){return{x:0,y:0,pageX:0,pageY:0}}var o=0,n=this.pages.length,j=0;if(f.abs(k-this.absStartX)<this.snapThresholdX&&f.abs(p-this.absStartY)<this.snapThresholdY){return this.currentPage}if(k>0){k=0}else{if(k<this.maxScrollX){k=this.maxScrollX}}if(p>0){p=0}else{if(p<this.maxScrollY){p=this.maxScrollY}}for(;o<n;o++){if(k>=this.pages[o][0].cx){k=this.pages[o][0].x;break}}n=this.pages[o].length;for(;j<n;j++){if(p>=this.pages[0][j].cy){p=this.pages[0][j].y;break}}if(o==this.currentPage.pageX){o+=this.directionX;if(o<0){o=0}else{if(o>=this.pages.length){o=this.pages.length-1}}k=this.pages[o][0].x}if(j==this.currentPage.pageY){j+=this.directionY;if(j<0){j=0}else{if(j>=this.pages[0].length){j=this.pages[0].length-1}}p=this.pages[0][j].y}return{x:k,y:p,pageX:o,pageY:j}},goToPage:function(j,o,k,n){n=n||this.options.bounceEasing;if(j>=this.pages.length){j=this.pages.length-1}else{if(j<0){j=0}}if(o>=this.pages[j].length){o=this.pages[j].length-1}else{if(o<0){o=0}}var m=this.pages[j][o].x,l=this.pages[j][o].y;k=k===undefined?this.options.snapSpeed||f.max(f.max(f.min(f.abs(m-this.x),1000),f.min(f.abs(l-this.y),1000)),300):k;this.currentPage={x:m,y:l,pageX:j,pageY:o};this.scrollTo(m,l,k,n)},next:function(k,m){var j=this.currentPage.pageX,l=this.currentPage.pageY;j++;if(j>=this.pages.length&&this.hasVerticalScroll){j=0;l++}this.goToPage(j,l,k,m)},prev:function(k,m){var j=this.currentPage.pageX,l=this.currentPage.pageY;j--;if(j<0&&this.hasVerticalScroll){j=0;l--}this.goToPage(j,l,k,m)},_initKeys:function(l){var k={pageUp:33,pageDown:34,end:35,home:36,left:37,up:38,right:39,down:40};var j;if(typeof this.options.keyBindings=="object"){for(j in this.options.keyBindings){if(typeof this.options.keyBindings[j]=="string"){this.options.keyBindings[j]=this.options.keyBindings[j].toUpperCase().charCodeAt(0)}}}else{this.options.keyBindings={}}for(j in k){this.options.keyBindings[j]=this.options.keyBindings[j]||k[j]}d.addEvent(g,"keydown",this);this.on("destroy",function(){d.removeEvent(g,"keydown",this)})},_key:function(o){if(!this.enabled){return}var j=this.options.snap,p=j?this.currentPage.pageX:this.x,n=j?this.currentPage.pageY:this.y,l=d.getTime(),k=this.keyTime||0,m=0.25,q;if(this.options.useTransition&&this.isInTransition){q=this.getComputedPosition();this._translate(f.round(q.x),f.round(q.y));this.isInTransition=false}this.keyAcceleration=l-k<200?f.min(this.keyAcceleration+m,50):0;switch(o.keyCode){case this.options.keyBindings.pageUp:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){p+=j?1:this.wrapperWidth}else{n+=j?1:this.wrapperHeight}break;case this.options.keyBindings.pageDown:if(this.hasHorizontalScroll&&!this.hasVerticalScroll){p-=j?1:this.wrapperWidth}else{n-=j?1:this.wrapperHeight}break;case this.options.keyBindings.end:p=j?this.pages.length-1:this.maxScrollX;n=j?this.pages[0].length-1:this.maxScrollY;break;case this.options.keyBindings.home:p=0;n=0;break;case this.options.keyBindings.left:p+=j?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.up:n+=j?1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.right:p-=j?-1:5+this.keyAcceleration>>0;break;case this.options.keyBindings.down:n-=j?1:5+this.keyAcceleration>>0;break;default:return}if(j){this.goToPage(p,n);return}if(p>0){p=0;this.keyAcceleration=0}else{if(p<this.maxScrollX){p=this.maxScrollX;this.keyAcceleration=0}}if(n>0){n=0;this.keyAcceleration=0}else{if(n<this.maxScrollY){n=this.maxScrollY;this.keyAcceleration=0}}this.scrollTo(p,n,0);this.keyTime=l},_animate:function(s,r,m,j){var p=this,o=this.x,n=this.y,k=d.getTime(),q=k+m;function l(){var t=d.getTime(),v,u,w;if(t>=q){p.isAnimating=false;p._translate(s,r);if(!p.resetPosition(p.options.bounceTime)){p._execEvent("scrollEnd")}return}t=(t-k)/m;w=j(t);v=(s-o)*w+o;u=(r-n)*w+n;p._translate(v,u);if(p.isAnimating){i(l)}}this.isAnimating=true;l()},handleEvent:function(j){switch(j.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(j);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(j);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(j);break;case"orientationchange":case"resize":this._resize();break;case"transitionend":case"webkitTransitionEnd":case"oTransitionEnd":case"MSTransitionEnd":this._transitionEnd(j);break;case"wheel":case"DOMMouseScroll":case"mousewheel":this._wheel(j);break;case"keydown":this._key(j);break;case"click":if(!j._constructed){j.preventDefault();j.stopPropagation()}break}}};function e(m,k,l){var n=b.createElement("div"),j=b.createElement("div");if(l===true){n.style.cssText="position:absolute;z-index:9999";j.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;position:absolute;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);border-radius:3px"}j.className="iScrollIndicator";if(m=="h"){if(l===true){n.style.cssText+=";height:7px;left:2px;right:2px;bottom:0";j.style.height="100%"}n.className="iScrollHorizontalScrollbar"}else{if(l===true){n.style.cssText+=";width:7px;bottom:2px;top:2px;right:1px";j.style.width="100%"}n.className="iScrollVerticalScrollbar"}n.style.cssText+=";overflow:hidden";if(!k){n.style.pointerEvents="none"}n.appendChild(j);return n}function c(j,k){this.wrapper=typeof k.el=="string"?b.querySelector(k.el):k.el;this.wrapperStyle=this.wrapper.style;this.indicator=this.wrapper.children[0];this.indicatorStyle=this.indicator.style;this.scroller=j;this.options={listenX:true,listenY:true,interactive:false,resize:true,defaultScrollbars:false,shrink:false,fade:false,speedRatioX:0,speedRatioY:0};for(var l in k){this.options[l]=k[l]}this.sizeRatioX=1;this.sizeRatioY=1;this.maxPosX=0;this.maxPosY=0;if(this.options.interactive){if(!this.options.disableTouch){d.addEvent(this.indicator,"touchstart",this);d.addEvent(g,"touchend",this)}if(!this.options.disablePointer){d.addEvent(this.indicator,d.prefixPointerEvent("pointerdown"),this);d.addEvent(g,d.prefixPointerEvent("pointerup"),this)}if(!this.options.disableMouse){d.addEvent(this.indicator,"mousedown",this);d.addEvent(g,"mouseup",this)}}if(this.options.fade){this.wrapperStyle[d.style.transform]=this.scroller.translateZ;this.wrapperStyle[d.style.transitionDuration]=d.isBadAndroid?"0.001s":"0ms";this.wrapperStyle.opacity="0"}}c.prototype={handleEvent:function(j){switch(j.type){case"touchstart":case"pointerdown":case"MSPointerDown":case"mousedown":this._start(j);break;case"touchmove":case"pointermove":case"MSPointerMove":case"mousemove":this._move(j);break;case"touchend":case"pointerup":case"MSPointerUp":case"mouseup":case"touchcancel":case"pointercancel":case"MSPointerCancel":case"mousecancel":this._end(j);break}},destroy:function(){if(this.options.interactive){d.removeEvent(this.indicator,"touchstart",this);d.removeEvent(this.indicator,d.prefixPointerEvent("pointerdown"),this);d.removeEvent(this.indicator,"mousedown",this);d.removeEvent(g,"touchmove",this);d.removeEvent(g,d.prefixPointerEvent("pointermove"),this);d.removeEvent(g,"mousemove",this);d.removeEvent(g,"touchend",this);d.removeEvent(g,d.prefixPointerEvent("pointerup"),this);d.removeEvent(g,"mouseup",this)}if(this.options.defaultScrollbars){this.wrapper.parentNode.removeChild(this.wrapper)}},_start:function(k){var j=k.touches?k.touches[0]:k;k.preventDefault();k.stopPropagation();this.transitionTime();this.initiated=true;this.moved=false;this.lastPointX=j.pageX;this.lastPointY=j.pageY;this.startTime=d.getTime();if(!this.options.disableTouch){d.addEvent(g,"touchmove",this)}if(!this.options.disablePointer){d.addEvent(g,d.prefixPointerEvent("pointermove"),this)}if(!this.options.disableMouse){d.addEvent(g,"mousemove",this)}this.scroller._execEvent("beforeScrollStart")},_move:function(o){var k=o.touches?o.touches[0]:o,l,j,p,n,m=d.getTime();if(!this.moved){this.scroller._execEvent("scrollStart")}this.moved=true;l=k.pageX-this.lastPointX;this.lastPointX=k.pageX;j=k.pageY-this.lastPointY;this.lastPointY=k.pageY;p=this.x+l;n=this.y+j;this._pos(p,n);o.preventDefault();o.stopPropagation()},_end:function(l){if(!this.initiated){return}this.initiated=false;l.preventDefault();l.stopPropagation();d.removeEvent(g,"touchmove",this);d.removeEvent(g,d.prefixPointerEvent("pointermove"),this);d.removeEvent(g,"mousemove",this);if(this.scroller.options.snap){var j=this.scroller._nearestSnap(this.scroller.x,this.scroller.y);var k=this.options.snapSpeed||f.max(f.max(f.min(f.abs(this.scroller.x-j.x),1000),f.min(f.abs(this.scroller.y-j.y),1000)),300);if(this.scroller.x!=j.x||this.scroller.y!=j.y){this.scroller.directionX=0;this.scroller.directionY=0;this.scroller.currentPage=j;this.scroller.scrollTo(j.x,j.y,k,this.scroller.options.bounceEasing)}}if(this.moved){this.scroller._execEvent("scrollEnd")}},transitionTime:function(j){j=j||0;this.indicatorStyle[d.style.transitionDuration]=j+"ms";if(!j&&d.isBadAndroid){this.indicatorStyle[d.style.transitionDuration]="0.001s"}},transitionTimingFunction:function(j){this.indicatorStyle[d.style.transitionTimingFunction]=j},refresh:function(){this.transitionTime();if(this.options.listenX&&!this.options.listenY){this.indicatorStyle.display=this.scroller.hasHorizontalScroll?"block":"none"}else{if(this.options.listenY&&!this.options.listenX){this.indicatorStyle.display=this.scroller.hasVerticalScroll?"block":"none"}else{this.indicatorStyle.display=this.scroller.hasHorizontalScroll||this.scroller.hasVerticalScroll?"block":"none"}}if(this.scroller.hasHorizontalScroll&&this.scroller.hasVerticalScroll){d.addClass(this.wrapper,"iScrollBothScrollbars");d.removeClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="8px"}else{this.wrapper.style.bottom="8px"}}}else{d.removeClass(this.wrapper,"iScrollBothScrollbars");d.addClass(this.wrapper,"iScrollLoneScrollbar");if(this.options.defaultScrollbars&&this.options.customStyle){if(this.options.listenX){this.wrapper.style.right="2px"}else{this.wrapper.style.bottom="2px"}}}var j=this.wrapper.offsetHeight;if(this.options.listenX){this.wrapperWidth=this.wrapper.clientWidth;if(this.options.resize){this.indicatorWidth=f.max(f.round(this.wrapperWidth*this.wrapperWidth/(this.scroller.scrollerWidth||this.wrapperWidth||1)),8);this.indicatorStyle.width=this.indicatorWidth+"px"}else{this.indicatorWidth=this.indicator.clientWidth}this.maxPosX=this.wrapperWidth-this.indicatorWidth;if(this.options.shrink=="clip"){this.minBoundaryX=-this.indicatorWidth+8;this.maxBoundaryX=this.wrapperWidth-8}else{this.minBoundaryX=0;this.maxBoundaryX=this.maxPosX}this.sizeRatioX=this.options.speedRatioX||(this.scroller.maxScrollX&&(this.maxPosX/this.scroller.maxScrollX))}if(this.options.listenY){this.wrapperHeight=this.wrapper.clientHeight;if(this.options.resize){this.indicatorHeight=f.max(f.round(this.wrapperHeight*this.wrapperHeight/(this.scroller.scrollerHeight||this.wrapperHeight||1)),8);this.indicatorStyle.height=this.indicatorHeight+"px"}else{this.indicatorHeight=this.indicator.clientHeight}this.maxPosY=this.wrapperHeight-this.indicatorHeight;if(this.options.shrink=="clip"){this.minBoundaryY=-this.indicatorHeight+8;this.maxBoundaryY=this.wrapperHeight-8}else{this.minBoundaryY=0;this.maxBoundaryY=this.maxPosY}this.maxPosY=this.wrapperHeight-this.indicatorHeight;this.sizeRatioY=this.options.speedRatioY||(this.scroller.maxScrollY&&(this.maxPosY/this.scroller.maxScrollY))}this.updatePosition()},updatePosition:function(){var j=this.options.listenX&&f.round(this.sizeRatioX*this.scroller.x)||0,k=this.options.listenY&&f.round(this.sizeRatioY*this.scroller.y)||0;if(!this.options.ignoreBoundaries){if(j<this.minBoundaryX){if(this.options.shrink=="scale"){this.width=f.max(this.indicatorWidth+j,8);this.indicatorStyle.width=this.width+"px"}j=this.minBoundaryX}else{if(j>this.maxBoundaryX){if(this.options.shrink=="scale"){this.width=f.max(this.indicatorWidth-(j-this.maxPosX),8);this.indicatorStyle.width=this.width+"px";j=this.maxPosX+this.indicatorWidth-this.width}else{j=this.maxBoundaryX}}else{if(this.options.shrink=="scale"&&this.width!=this.indicatorWidth){this.width=this.indicatorWidth;this.indicatorStyle.width=this.width+"px"}}}if(k<this.minBoundaryY){if(this.options.shrink=="scale"){this.height=f.max(this.indicatorHeight+k*3,8);this.indicatorStyle.height=this.height+"px"}k=this.minBoundaryY}else{if(k>this.maxBoundaryY){if(this.options.shrink=="scale"){this.height=f.max(this.indicatorHeight-(k-this.maxPosY)*3,8);this.indicatorStyle.height=this.height+"px";k=this.maxPosY+this.indicatorHeight-this.height}else{k=this.maxBoundaryY}}else{if(this.options.shrink=="scale"&&this.height!=this.indicatorHeight){this.height=this.indicatorHeight;this.indicatorStyle.height=this.height+"px"}}}}this.x=j;this.y=k;if(this.scroller.options.useTransform){this.indicatorStyle[d.style.transform]="translate("+j+"px,"+k+"px)"+this.scroller.translateZ}else{this.indicatorStyle.left=j+"px";this.indicatorStyle.top=k+"px"}},_pos:function(j,k){if(j<0){j=0}else{if(j>this.maxPosX){j=this.maxPosX}}if(k<0){k=0}else{if(k>this.maxPosY){k=this.maxPosY}}j=this.options.listenX?f.round(j/this.sizeRatioX):this.scroller.x;k=this.options.listenY?f.round(k/this.sizeRatioY):this.scroller.y;this.scroller.scrollTo(j,k)},fade:function(m,l){if(l&&!this.visible){return}clearTimeout(this.fadeTimeout);this.fadeTimeout=null;var k=m?250:500,j=m?0:300;m=m?"1":"0";this.wrapperStyle[d.style.transitionDuration]=k+"ms";this.fadeTimeout=setTimeout((function(n){this.wrapperStyle.opacity=n;this.visible=+n}).bind(this,m),j)}};h.utils=d;if(typeof module!="undefined"&&module.exports){module.exports=h}else{g.IScroll=h}})(window,document,Math);function tab(b,c,d){c.on(b,function(){$(this).siblings(".table-cell").removeClass("cur");$(this).addClass("cur");var f=$(this).attr("data-href");$(f).siblings("div").css("display","none");$(f).css("display","block");var e=$(this);if(d){d(e)}})}var validate={ok:function(b){var c=this;var d=true;$.each(b,function(e,f){c.require(f.id,f.errmsg);if(!c.require(f.id,f.errmsg)){d=false}});return d},require:function(c,e){c=$(c);var d=c.val();var b=c.parent().find(".tips");if(d==""||d==undefined){b.html(e);return false}else{b.html("");return true}},phone:function(d,e){var c=this;d=$(d);var b=d.parent().find(".tips");d.on("change",function(){var f=$.trim(this.value);if(!/^(0|86|17951)?(13[0-9]|15[012356789]|18[0-9]|14[57]|17[0-9])[0-9]{8}$/.test(f)){b.html(e)}else{b.html("")}})},number:function(d,e){var c=this;d=$(d);var b=d.parent().find(".tips");d.on("change",function(){var f=$.trim(this.value);if(!/^-?(?:\d+|\d{1,3}(?:,\d{3})+)?(?:\.\d+)?$/.test(f)){b.html(e)}else{b.html("")}})},username:function(f,g,e){var d=this;f=$(f);var b=f.parent().find(".tips");var c=/^[a-zA-Z_\u4e00-\u9fa5]{2,20}$/;f.on("change",function(){var h=$.trim(this.value);if(!c.test(h)){b.html(g)}else{b.html("")}})},chinese:function(f,g,e){var d=this;f=$(f);var b=f.parent().find(".tips");var c=/^[\u4e00-\u9fa5]+$/;f.on("change",function(){var h=$.trim(this.value);if(!c.test(h)){b.html(g)}else{b.html("")}})},email:function(c,d){c=$(c);var b=c.parent().find(".tips");c.on("change",function(){var e=$.trim(this.value);if(!/^\w+((-\w+)|(\.\w+))*\@[A-Za-z0-9]+((\.|-)[A-Za-z0-9]+)*\.[A-Za-z0-9]+$/.test(e)){b.html(d)}else{b.html("")}})},compare:function(d,c,e){d=$(d);c=$(c);var b=c.parent().find(".tips");c.on("change",function(){var g=$.trim(d[0].value);var f=$.trim(this.value);if(g!==f){b.html(e)}else{b.html("")}})},strLength:function(c){var b=$.isArray(c)?c.length:c.length;return b},max:function(b,c){return b<=c},};